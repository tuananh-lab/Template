(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51b22440","chunk-093ee78e"],{"0f9f":function(t,e,a){"use strict";a("8c8b")},"1f22":function(t,e,a){},"277c":function(t,e,a){"use strict";a("1f22")},3741:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gradution-student"},[a("div",{staticClass:"student-box"},[t.isView?a("modal-view",{attrs:{dataInfo:t.dataInfo},on:{handleBack:t.handleBack}}):a("div",[t.dataInfo.StudentID||"mobile"==t.device?t.dataInfo.StudentID||"mobile"!=t.device?a("div",{staticClass:"box-form"},[a("transition",{attrs:{name:"el-zoom-in-center"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataInfo.StudentID,expression:"dataInfo.StudentID"}]},[a("div",{staticClass:"form-header"},[a("div",{staticClass:"header-line"}),t._v(" "),a("div",{staticClass:"header-title"},[t._v("Đăng ký dự Lễ tốt nghiệp và thời gian nhận hồ sơ tốt nghiệp\n              ")]),t._v(" "),a("div",{staticClass:"header-info"},[t._v("Xin chào "),a("span",{staticClass:"name"},[t._v(t._s(t.dataInfo.FullName)+" !")]),t._v(" "),a("p",[t._v("Email: "),a("span",{staticClass:"email"},[t._v(t._s(t.dataInfo.Email))])]),t._v(" "),a("p",[t._v("Bạn vui lòng cung cấp thông tin phục vụ công tác chế bản ấn phẩm trình chiếu và trả hồ sơ tốt nghiệp. Các bạn hỗ trợ đẩy thông tin chuẩn hóa theo form dưới, bao gồm các thông tin: (1) Ảnh có kích thước vuông, nên là ảnh đẹp và nghiêm túc, vì hình ảnh được trình chiếu và quảng bá rộng rãi; (2) Lời nhắn hay lưu bút, khoảng từ 50 đến 80 từ, thế hiện cảm nghĩ về bản thân, bạn bè, thầy cô và Nhà trường; và (3) một số thông tin khác...")])])]),t._v(" "),a("div",{staticClass:"form-body"},[a("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"100px",model:t.form,rules:t.rules,size:"small"}},[a("el-form-item",{attrs:{label:"Ảnh VUÔNG dùng để trình chiếu"}},[a("el-upload",{class:1===t.uploadFileList.length?"upload-demo":"",attrs:{"on-change":t.uploadHandleChange,accept:"image/jpeg, image/png",action:"https://jsonplaceholder.typicode.com/posts/","auto-upload":!1,limit:1,"on-exceed":t.uploadExceed,"file-list":t.uploadFileList,"list-type":"picture-card","on-preview":t.uploadOnPreview,"on-remove":t.uploadRemoveFile,"before-remove":t.uploadBeforeRemove,"on-error":function(e,a,n){return t.uploadError(e,a,n)},"on-success":function(e,a,n){return t.uploadSuccess(e,a,n)}}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"Lưu bút hoặc cảm nghĩ"}},[a("el-input",{attrs:{type:"textarea",rows:4,maxlength:"250","show-word-limit":""},model:{value:t.form.Message,callback:function(e){t.$set(t.form,"Message",e)},expression:"form.Message"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Bạn có tham dự lễ tốt nghiệp",prop:"HasAttend"}},[a("el-radio-group",{model:{value:t.form.HasAttend,callback:function(e){t.$set(t.form,"HasAttend",e)},expression:"form.HasAttend"}},[a("el-radio",{attrs:{label:1}},[t._v("Có")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("Không")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Số lượng người thân tham dự lễ tốt nghiệp"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.NumAttend,callback:function(e){t.$set(t.form,"NumAttend",e)},expression:"form.NumAttend"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Bạn sẽ nhận bằng và hồ sơ khi nào"}},[a("el-radio-group",{model:{value:t.form.DateReceive,callback:function(e){t.$set(t.form,"DateReceive",e)},expression:"form.DateReceive"}},[a("el-radio",{attrs:{label:"Trong ngày tham dự lễ tốt nghiệp"}},[t._v("Trong ngày tham dự lễ tốt nghiệp")]),t._v(" "),a("el-radio",{attrs:{label:"Sau ngày 12/5"}},[t._v("Sau ngày 12/5")]),t._v(" "),a("el-radio",{attrs:{label:"Trước (vào ngày 4/5)"}},[t._v("Trước (vào ngày 4/5)")])],1)],1),t._v(" "),a("div",{staticClass:"form-btn"},["mobile"!=t.device&&t.form.StudentID?a("div",{staticClass:"btn-view",on:{click:t.hadleView}},[t._v("Xem trước "),a("i",{staticClass:"el-icon-video-play"})]):t._e(),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.btnUpdate,expression:"btnUpdate"}],staticClass:"btn-update",on:{click:t.hadleUpdate}},[t._v("Xác nhận")])])],1)],1)])])],1):a("div",{staticClass:"box-mobile"},[a("div",{staticClass:"box-check"},[a("div",{staticClass:"box-info"},[a("strong",{staticStyle:{"font-size":"10pt"}},[t._v("Mã số sinh viên("),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("):")]),t._v(" "),a("el-input",{ref:"mssv",attrs:{clearable:"",placeholder:"Nhập mã số sinh viên của bạn"},model:{value:t.mssv,callback:function(e){t.mssv=e},expression:"mssv"}}),t._v(" "),a("div",{staticClass:"captcha"},[a("vue-recaptcha",{ref:"recaptcha",attrs:{sitekey:"6Lcy7rMUAAAAADsd5-3I3kqhIHDNccn-1txD_94h",loadRecaptchaScript:!0},on:{verify:t.onVerify,expired:t.onExpired}})],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.btnLoading,expression:"btnLoading"}],staticClass:"btn-accept",on:{click:t.hadleSubmit}},[t._v("Xác thực")])],1)])]):a("div",{staticClass:"box-image"},[a("div",{staticClass:"box-check"},[a("div",{staticClass:"box-info"},[a("strong",{staticStyle:{"font-size":"10pt"}},[t._v("Mã số sinh viên("),a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("):")]),t._v(" "),a("el-input",{ref:"mssv",attrs:{clearable:"",placeholder:"Nhập mã số sinh viên của bạn"},model:{value:t.mssv,callback:function(e){t.mssv=e},expression:"mssv"}}),t._v(" "),a("div",{staticClass:"captcha"},[a("vue-recaptcha",{ref:"recaptcha",attrs:{sitekey:"6Lcy7rMUAAAAADsd5-3I3kqhIHDNccn-1txD_94h",loadRecaptchaScript:!0},on:{verify:t.onVerify,expired:t.onExpired}})],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.btnLoading,expression:"btnLoading"}],staticClass:"btn-accept",on:{click:t.hadleSubmit}},[t._v("Xác thực")])],1)])])])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.profileVisible},on:{"update:visible":function(e){t.profileVisible=e}}},[a("img",{attrs:{width:"100%",height:"100%",src:t.profileImg,alt:""}})])],1)},i=[],s=(a("7f7f"),a("5530")),o=a("e096"),c=a("c7eb"),r=(a("96cf"),a("1da1")),l=a("bc3a"),d=a.n(l),u="https://ctsv.hust.edu.vn/gradution-api/File/";function h(t,e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(Object(c["a"])().mark((function t(e,a){var n;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=new FormData,n.append("image",a),!u||!a){t.next=7;break}return t.next=5,d.a.post("".concat(u).concat(e),n,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){return t.data}));case 5:t.next=8;break;case 7:return t.abrupt("return");case 8:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}var m=a("efef"),f=a("9de3"),v={components:{VueRecaptcha:o["a"],ModalView:m["default"]},props:["dataI","dataF","mode"],data:function(){return{captcha:null,mssv:"",isView:!1,profileVisible:!1,profileImg:"",btnLoading:!1,btnUpdate:!1,dataInfo:{},messageInfo:{},imageUrl:"",uploadFileList:[],rules:{HasAttend:[{required:!0,message:"Không được để trống",trigger:"change"}]},form:{StudentID:"",FullName:"",Major:"",Class:"",School:"",Message:"",HasAttend:"",NumAttend:"",DateReceive:""},id:"",otpCode:""}},computed:{device:function(){return this.$store.state.app.device}},methods:{onVerify:function(t){this.captcha=t},onExpired:function(){this.captcha=null},hadleSubmit:function(){var t=this;this.mssv?this.captcha?(this.btnLoading=!0,Object(f["b"])({StudentID:this.mssv,Captcha:this.captcha}).then((function(e){t.btnLoading=!1,t.dataInfo=e.Data,e.Message&&(t.form.Message=e.Message.Message,t.form.HasAttend=e.Message.HasAttend,t.form.DateReceive=e.Message.DateReceive,t.form.NumAttend=e.Message.NumAttend,t.form.StudentID=e.Message.StudentID,t.dataInfo.Message=e.Message.Message,e.Message.Image&&(t.dataInfo.Image=e.Message.Image+"?"+(new Date).getTime(),t.uploadFileList.push({url:e.Message.Image,name:e.Message.StudentID})))})).finally((function(){t.btnLoading=!1,t.$refs.recaptcha.reset()}))):this.$notify.warning("Hãy nhập captcha"):this.$notify.warning("Hãy nhập mã số sinh viên")},hadleUpdate:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.btnUpdate=!0,Object(f["a"])({StudentID:t.dataInfo.StudentID}).then((function(e){var a="Mã OTP được gửi về email "+e.Email+".Nhập mã OTP để xác nhận thay đổi:";t.$prompt(a,"Xác nhận thay đổi",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy"}).then((function(e){var a=e.value,n={Data:{StudentID:t.dataInfo.StudentID,FullName:t.dataInfo.FullName,Class:t.dataInfo.Class,Major:t.dataInfo.Major,Email:t.dataInfo.Email,Type:t.dataInfo.Type,Message:t.form.Message,Specialize:t.dataInfo.Specialize,School:t.dataInfo.School,Email2:t.dataInfo.Email2,DateReceive:t.form.DateReceive,NumAttend:t.form.NumAttend,HasAttend:t.form.HasAttend},OTPCode:a.trim()};Object(f["c"])(n).then((function(e){t.$notify({title:"Thành công",message:"Cập nhật lưu bút thành công",duration:6e3,type:"success"}),t.id=e.ID,t.otpCode=a.trim(),t.uploadImage(t.dataInfo.StudentID,t.id,t.otpCode),setTimeout((function(){e.Token&&(t.$route.params.username?t.$router.go(t.$router.currentRoute):t.$router.push("/le-tot-nghiep/"+t.dataInfo.StudentID+"/"+e.Token))}),2e3)}))})).catch((function(){})).finally((function(){t.btnUpdate=!1}))})))}))},uploadError:function(t,e,a,n){this.$message({showClose:!0,message:"Upload file thất bại",type:"error"})},uploadSuccess:function(t,e,a,n){0==t.RespCode||this.$notify({title:"Xảy ra lỗi",message:t.RespText,type:"error",position:"top-right"})},uploadRemoveFile:function(t,e){this.uploadFileList=[]},uploadBeforeRemove:function(t,e){return!!t.raw||this.$confirm("Bạn có muốn xóa ảnh này không?","Thông báo",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy",type:"warning",center:!0})},uploadExceed:function(t,e){this.$message.warning("Chỉ chọn được 1 ảnh")},uploadHandleChange:function(t,e){var a,n=this,i=new Image;i.src=t.url,i.onload=function(){var t=i.naturalWidth,e=i.naturalHeight;a=t<=e?t/e:e/t},setTimeout((function(){var e=a,i=.95,o=1.05;e>=i&&e<=o?n.uploadFileList.push(Object(s["a"])(Object(s["a"])({},t),{},{name:t.raw.name,url:URL.createObjectURL(t.raw)})):(n.uploadFileList=[],n.$notify({title:"Lỗi",message:"Ảnh tải lên không hợp lệ, vui lòng cập nhật ảnh kích thước VUÔNG",type:"error",position:"top-right"}))}),500)},uploadOnPreview:function(t){this.profileImg=t.url,this.profileVisible=!0},uploadImage:function(t,e,a){var n="UploadImageStudent?StudentID=".concat(t,"&ID=").concat(e,"&OTPCode=").concat(a);h(n,this.uploadFileList[0].raw)},hadleView:function(){var t=this,e=this.$loading({lock:!0,text:"Đang tải dữ liệu...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.isView=!0}),2e3)},handleBack:function(){var t=this,e=this.$loading({lock:!0,text:"Đang tải dữ liệu...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.isView=!1}),2e3)},initData:function(){1==this.mode&&(this.dataInfo=this.dataI,this.form.Message=this.dataF.Message,this.form.HasAttend=this.dataF.HasAttend,this.form.DateReceive=this.dataF.DateReceive,this.form.NumAttend=this.dataF.NumAttend,this.form.StudentID=this.dataF.StudentID,this.dataInfo.Message=this.dataF.Message,this.dataF.Image&&(this.dataInfo.Image=this.dataF.Image+"?"+(new Date).getTime(),this.uploadFileList.push({url:this.dataF.Image,name:this.dataF.StudentID})),this.isView=!0)}},mounted:function(){},created:function(){var t=this,e=this.$loading({lock:!0,text:"Đang tải dữ liệu...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){e.close(),t.initData()}),1e3)}},g=v,b=(a("277c"),a("2877")),I=Object(b["a"])(g,n,i,!1,null,"0611802c",null);e["default"]=I.exports},"8c8b":function(t,e,a){},"9de3":function(t,e,a){"use strict";a("6762"),a("2fdb");var n=a("bc3a"),i=a.n(n),s=a("5c96"),o=(a("4360"),a("5f87"),i.a.create({baseURL:"https://ctsv.hust.edu.vn/gradution-api",withCredentials:!1,timeout:1e4,headers:{Accept:"application/json","Content-Type":"application/json"}}));o.interceptors.request.use((function(t){return null==t.data&&(t.data={}),t.url.includes("UserLogin"),t}),(function(t){return Promise.reject(t)})),o.interceptors.response.use((function(t){null==t.data&&(t.data={});var e=t.data;return 0!==e.RespCode?(-1===e.RespCode||Object(s["Message"])({message:e.RespText||"Error",type:"error",duration:5e3}),Promise.reject()):e}),(function(t){return Object(s["Message"])({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}));var c=o;function r(t){return c({url:"/CTSV/GetStudentByID",method:"post",data:t})}function l(t){return c({url:"/CTSV/GetOTP",method:"post",data:t})}function d(t){return c({url:"/CTSV/UpdateMessageGradution",method:"post",data:t})}a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return d}))},efef:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"printMe",staticClass:"gradution-student"},[a("div",{staticClass:"student-box"},["mobile"!=t.device?a("div",{ref:"printMe",staticClass:"box-image"},[a("div",{staticClass:"box-check"},[a("div",{staticClass:"box-info"},[a("div",{staticClass:"type"},[t._v("Tân kỹ sư / cử nhân")]),t._v(" "),a("div",{staticClass:"name text-ellipsis"},[t._v(t._s(t.dataInfo.FullName))]),t._v(" "),a("div",{staticClass:"class"},[t._v(t._s(t.dataInfo.Specialize))]),t._v(" "),a("div",{staticClass:"message "},[t.dataInfo.Message?a("div",{staticClass:"content"},[t._v("❝ "),a("span",{domProps:{innerHTML:t._s(t.dataInfo.Message)}}),t._v("❞")]):t._e()])]),t._v(" "),a("div",{staticClass:"box-avatar"},[a("img",{attrs:{src:t.dataInfo.Image?t.dataInfo.Image:"./img/noPhoto.jpg",alt:t.dataInfo.StudentID}})]),t._v(" "),a("div",{staticClass:"clear-both"})]),t._v(" "),a("div",{staticClass:"form-btn"},[a("div",{staticClass:"btn-view",on:{click:t.hadleBack}},[a("i",{staticClass:"el-icon-back"}),t._v(" Cập nhật")])])]):a("div",{staticClass:"blank-table"},[t._v("Vui lòng sử dụng máy tính để thực hiện tính năng này")])])])},i=[],s=a("ade3"),o=Object(s["a"])({components:{},props:{dataInfo:Object},data:function(){return{}},computed:{},methods:{hadleBack:function(){this.$emit("handleBack")}},mounted:function(){window.scrollTo({top:0,behavior:"smooth"})}},"computed",{device:function(){return this.$store.state.app.device}}),c=o,r=(a("0f9f"),a("2877")),l=Object(r["a"])(c,n,i,!1,null,"da1a7092",null);e["default"]=l.exports}}]);